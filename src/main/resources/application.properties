spring.application.name=url-management-shortener

# Datasource Configuration
# Supports multiple formats:
# 1. Individual variables (SPRING_DATASOURCE_URL, SPRING_DATASOURCE_USERNAME, etc.) - for Docker/local
# 2. DATABASE_URL (Render format: postgresql://user:password@host:port/database) - for Render
# 3. Falls back to H2 in-memory database for local development
spring.datasource.url=${SPRING_DATASOURCE_URL:${DATABASE_URL:jdbc:h2:mem:testdb}}
spring.datasource.username=${SPRING_DATASOURCE_USERNAME:${DB_USER:sa}}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD:${DB_PASSWORD:password}}
spring.datasource.driver-class-name=${SPRING_DATASOURCE_DRIVER_CLASS_NAME:org.h2.Driver}

# JPA / Hibernate Configuration
# Spring Boot will auto-detect the database platform based on the datasource URL
# For PostgreSQL in Docker, it will automatically use PostgreSQLDialect
# For H2 locally, it will use H2Dialect
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true

# H2 Console (only enabled for local development with H2)
spring.h2.console.enabled=${SPRING_H2_CONSOLE_ENABLED:true}

# Server port - uses PORT environment variable (set by Render) or defaults to 8080
server.port=${PORT:8080}

# CORS Configuration
# Allowed origins for CORS (comma-separated for multiple origins)
# Default: http://localhost:5173 (for local frontend development)
# For production, set CORS_ALLOWED_ORIGINS environment variable
cors.allowed-origins=${CORS_ALLOWED_ORIGINS:http://localhost:5173}


# Logging Configuration
# Set root logging level to WARN (only show warnings and errors)
logging.level.root=WARN

# Set your application logging to INFO (show important application logs)
logging.level.com._cortex=INFO

# Reduce Spring Boot framework noise
logging.level.org.springframework=WARN
logging.level.org.springframework.boot=WARN
logging.level.org.springframework.web=WARN

# Reduce Hibernate verbosity
logging.level.org.hibernate=WARN
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=WARN

# Reduce HikariCP (connection pool) verbosity
logging.level.com.zaxxer.hikari=WARN

# Reduce Tomcat verbosity
logging.level.org.apache.catalina=WARN
logging.level.org.apache.tomcat=WARN

# Use colored console output for better readability
spring.output.ansi.enabled=ALWAYS

# Customize log pattern for cleaner output
logging.pattern.console=%clr(%d{HH:mm:ss.SSS}){faint} %clr(%5p) %clr(---){faint} %clr([%15.15t]){faint} %clr(%-40.40logger{39}){cyan} %clr(:){faint} %m%n%wEx

# Disable Spring Boot banner (optional - uncomment to hide the ASCII art banner)
# spring.main.banner-mode=off
