databases:
  # PostgreSQL Database
  - name: urlshortener-db
    databaseName: urlshortener
    user: admin
    plan: free  # Change to 'starter' or 'standard' for production

services:
  # Spring Boot Web Service
  - type: web
    name: urlshortener-app
    runtime: docker
    plan: free  # Change to 'starter' or 'standard' for production
    dockerfilePath: ./Dockerfile
    dockerContext: .
    envVars:
      # Disable H2 console in production
      - key: SPRING_H2_CONSOLE_ENABLED
        value: false
      # CORS Configuration - Set to your frontend domain(s) for production
      # Replace 'https://your-frontend-domain.onrender.com' with your actual frontend URL
      # For multiple origins, use comma-separated: "https://domain1.com,https://domain2.com"
      - key: CORS_ALLOWED_ORIGINS
        value: https://url-shortener-client-red.vercel.app  # TODO: Replace with your actual frontend URL
      # Note: DATABASE_URL will be automatically provided by Render when you link
      # the urlshortener-db database to this service in the Render dashboard.
      # The docker-entrypoint.sh script will parse DATABASE_URL and set Spring Boot variables.
    healthCheckPath: /actuator/health

